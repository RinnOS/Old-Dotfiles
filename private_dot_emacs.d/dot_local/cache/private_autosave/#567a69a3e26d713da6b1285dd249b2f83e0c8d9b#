import 'dotenv/config';
import { Client } from 'discord.js';
import { fs } from './globalNodes.js';

const client = new Client({
  intents: 32767, //! The current number uses ALL intents, make sure to go to https://ziad87.net/intents/ to get something that suits your bot
  partials: ['CHANNEL'],
  presence: {
    status: 'idle',
    afk: true,
    activities: [
      {
        name: 'Booting up',
        type: 'WATCHING',
        url: '',
      },
    ],
  },
});

// Get all the events
const eventFiles = fs
  .readdirSync('./events')
  .filter((file) => file.endsWith('.js'));

for (const file of eventFiles) {
  const event = await import(`./events/${file}`);

  if (event.once) {
    client.once(event.name, (...args) => event.execute(...args));
  } else {
    client.on(event.name, (...args) => event.execute(...args));
  }
}

client.login(process.env.DISCORD_TOKEN);
